<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · MomentMatching.jl</title><meta name="title" content="- · MomentMatching.jl"/><meta property="og:title" content="- · MomentMatching.jl"/><meta property="twitter:title" content="- · MomentMatching.jl"/><meta name="description" content="Documentation for MomentMatching.jl."/><meta property="og:description" content="Documentation for MomentMatching.jl."/><meta property="twitter:description" content="Documentation for MomentMatching.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="MomentMatching.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">MomentMatching.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../examples/">Example</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>-</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>-</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ZoltanRacz/MomentMatching.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ZoltanRacz/MomentMatching.jl/blob/main/docs/src/fragments/README.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p><strong>References are ruined on purpose, fix when they point somewhere</strong></p><p><strong>Description.</strong> This package allows performing Method of Moments estimation (Generalized and Simulated).   It comprises three files which are not model-specific and are used in all applications and model-specific files. See below for more details.</p><h2 id="Routine-files"><a class="docs-heading-anchor" href="#Routine-files">Routine files</a><a id="Routine-files-1"></a><a class="docs-heading-anchor-permalink" href="#Routine-files" title="Permalink"></a></h2><p>There are three files which are not model-specific and which are used in all applications:</p><ol><li><em>SMM</em>GMM<em>estimation</em>: contains structures and functions to perform the estimation;</li><li><em>SMM</em>GMM<em>inference</em>: contains functions to perform inference and diagnostics;</li><li><em>SMM</em>GMM<em>output</em>: contains structures and functions to produce tables and figures to display the estimation results.</li></ol><h3 id="1.-SMM*GMM*estimation"><a class="docs-heading-anchor" href="#1.-SMM*GMM*estimation">1. SMM<em>GMM</em>estimation</a><a id="1.-SMM*GMM*estimation-1"></a><a class="docs-heading-anchor-permalink" href="#1.-SMM*GMM*estimation" title="Permalink"></a></h3><p>This is the core file performing the estimation routine. To describe the procedure let&#39;s introduce some useful notation:</p><ul><li><p class="math-container">\[x\]</p>: array of data; </li><li><p class="math-container">\[\theta\]</p>: array containing <span>$K$</span> parameters to be estimated;</li><li><p class="math-container">\[g(x, \theta)\]</p>: array of <span>$M$</span> moment conditions, function of data and parameters, in the form <span>$g(x, \theta)=0$</span>;</li><li><p class="math-container">\[W\]</p>: weighting matrix for the moment conditions with dimension <span>$M \times M$</span>; </li><li><p class="math-container">\[g^{\prime}Wg\]</p>: objective function to be minimized;</li><li><p class="math-container">\[S=\mathbb{E}[g(x, \theta)g(x, \theta)^{\prime}]\]</p>: covariance matrix of the moments;</li><li><p class="math-container">\[G\]</p>: matrix with the derivatives of the moment conditions with respect to <span>$\theta$</span> with dimension <span>$M \times K$</span>;</li><li>Hat over quantity: identifies estimators.</li></ul><p><em>Note</em>: identification requires <span>$M \geq K$</span>.</p><p>The estimation algorithm in the function [<code>estimation</code>] includes a <em>global</em> and a <em>local</em> stage in its most general form. Nevertheless, the code is flexible enough to allow performing only one of the two stages at a time. </p><p><strong>Global stage.</strong> In the global stage (see [<code>matchmom</code>]) a Sobol sequence is generated on the parameter space defined by <span>$\theta$</span>. The objective function is evaluated at each combination of parameters in the sequence. If only the global stage is performed, the best (in terms of lowest value of the objective function) combination of parameters is returned as the minimizer. Else, the best points (the number can be specified by the user) are used as starting guesses for the local stage. </p><p><em>Note</em>: it is important that the number of global points evaluated is large, so that all the areas of the parameter space are searched well enough. This is especially true if the objective function is not well-behaved.</p><p><strong>Local stage.</strong> The most promising candidates found in the global stage are then used as starting points for a local stage (see [<code>opt_loc!</code>]), in which the Nelder-Mead algorithm is used to find the minimum of the objective function. If only the local stage is performed, the initial guess can be supplied by the user. The global minimizer is then the best point among the values returned at the end of the local minimization routine at each tried starting guess.     </p><p>The file also contains a function [<code>two_stage_estimation</code>] to perform two-step GMM estimation. In the first step estimation is performed with a default weighting matrix. Parametric bootstrap (described in the next section) then allows to get the updated efficient weighting matrix (under the assumption that the model and estimated parameters are correct). The latter is then used as weighting matrix for estimation in the second step.</p><h3 id="2.-SMM*GMM*inference"><a class="docs-heading-anchor" href="#2.-SMM*GMM*inference">2. SMM<em>GMM</em>inference</a><a id="2.-SMM*GMM*inference-1"></a><a class="docs-heading-anchor-permalink" href="#2.-SMM*GMM*inference" title="Permalink"></a></h3><p>This file contains functions to perform diagnostics and inference on the estimation results. </p><p><strong>Diagnostics.</strong> In order to check that a minimum is achieved, the function [<code>marginal_fobj</code>] evaluates the objective function at points around the estimated parameter <span>$\hat{\theta}$</span> in one dimension at a time (see below for functions to plot this check) and saves the results in an array.</p><p><strong>Parametric bootstrap.</strong> In order to gauge how precisely the targeted moments are estimated in the original data, a function param_bootstrap to perform parametric bootstrap is provided. Specifically, assuming model and estimated parameters are correct, alternative samples are simulated - with the same size as the original sample data sample - and, for each sample, an alternative vector of moments to match is computed. Then, for every alternative moment vector, the estimation procedure (local stage) is repeated. The resulting distribution of estimated parameters can be used to obtain the bootstrap confidence intervals. To check that the chosen seed does not influence the results (in which case it is recommended to restart the whole estimation with bigger simulation sizes), this procedure can optionally be repeated with several seeds.</p><p><strong>Standard errors.</strong> The asymptotic variance [<code>sandwich_matrix</code>] of the parameter estimates has the usual sandwich form: <span>$(G^\prime W G)^{-1} G^\prime W S W G(G^\prime W G)^{-1}$</span>. <span>$\hat{G}$</span> can is computed numerically at the estimated parameter value <span>$\hat{\theta}$</span> with the function [<code>Qmatrix</code>]. <span>$W$</span> is the weighting matrix used in estimation. Under the assumptions of the parametric bootstrap, there are two sources of variation in the parameter estimates: variation in the simulated sample for a given seed and across seeds. The parametric bootstrap procedure just outlined returns a distribution of the parameter estimates that considers exactly these two factors. Thus, the covariance matrix of the simulated moments is a consistent estimator for <span>$S$</span> and, after having been computed by the function [<code>Omega_boots</code>], it is used as <span>$\hat{S}$</span>. </p><p><em>Note</em>: If the model is just identified or if <span>$\hat{W}$</span> is a consistent estimator of <span>$S^{-1}$</span> then the variance simplifies to <span>$(G^\prime S^{-1} G)^{-1}$</span>. The latter happens, for instance, when <span>$\hat{W}$</span> is the efficient weighting matrix obtained in the two-stage estimation procedure or, in the parametric bootstrap case just described when <span>$\hat{W}$</span> is set to the inverse of the consistent estimator of <span>$S$</span>.  </p><p><strong>J-test.</strong> A function [<code>Jtest</code>] to test over-identifying restriction is provided. The <span>$J$</span>-statistic is defined as <span>$n\hat{g}^{\prime}\hat{W}\hat{g}$</span> where <span>$\hat{W}$</span> is a consistent estimator of <span>$S^{-1}$</span>, <span>$\hat{g}$</span> a consistent estimator of the moment conditions and <span>$n$</span> is the sample size. Under the null <span>$J \rightarrow_{d} \chi^2_{M-K}$</span>.  </p><h3 id="3.-SMM*GMM*output"><a class="docs-heading-anchor" href="#3.-SMM*GMM*output">3. SMM<em>GMM</em>output</a><a id="3.-SMM*GMM*output-1"></a><a class="docs-heading-anchor-permalink" href="#3.-SMM*GMM*output" title="Permalink"></a></h3><p>This file contains functions to organize the estimation results and to perform some sanity checks on them. More specifically, the following figures and tables can be generated: </p><ul><li><p>[<code>fsanity</code>]: figure plotting the estimated parameters in every trial of the global or local stage in increasing order with respect to the objective function value obtained. If the found optimum is stable, then the estimated parameter values should not vary much, especially for the trials that achieved objective function values close to the minimum.</p></li><li><p>[<code>fmarg</code>]: figure plotting the how the objective function varies when marginally moving the estimated parameter in one dimension at a time. If the optimum is a minimum, then the graphs should show that the objective function is minimized at that point.</p></li><li><p>[<code>fbootstrap</code>]: figure showing the histogram of parameter estimates obtained in each bootstrap iteration. </p></li><li><p>[<code>plotmoms</code>]: figure comparing the moments in the data and in the model (at the estimated parameter values). </p></li><li><p>[<code>tableest</code>]: table with parameter estimates, optionally including bootstrap SE.</p></li><li><p>[<code>tablemoms</code>]: table comparing the moments in the data and in the model (at the estimated parameter values), optionally including bootstrap SE.</p></li></ul><h2 id="Model-specific-files"><a class="docs-heading-anchor" href="#Model-specific-files">Model-specific files</a><a id="Model-specific-files-1"></a><a class="docs-heading-anchor-permalink" href="#Model-specific-files" title="Permalink"></a></h2><p>This section describes the general format for model-specific files so that they can be used by the files performing the estimation routine. </p><p>In general, the framework is flexible to accomodate any user-defined model. However, the following model-specific files should be included (as they are called in the general estimation routine):</p><ul><li>[<code>EstimationMode</code>]: type for model to be estimated.</li><li>[<code>InnerAuxStructure</code>]: type for the auxiliary structures to be initialized.</li><li>[<code>defaultInnerAuxStructure</code>]: sets up default auxiliary object for computing model moments.</li><li>[<code>default_weight_matrix</code>]: sets up default weighting matrix to compute the objective function.</li><li>[<code>datamoments</code>]: computes moments from the data.</li><li>[<code>parambounds</code>]: return parameter labels and ranges.</li><li>[<code>obj_mom</code>]: computes moments in model under a given parameter guess.</li><li>[<code>mdiff</code>]: computes deviation of model moments from data moments.</li><li>[<code>momentnames</code>]: returns the full names of the moments, used for organising results.</li><li>[<code>mean_moments</code>]: computes mean of moments, used for bootstrapping.</li></ul><p>In addition, the following can also be model-specific:</p><ul><li>[<code>indexvector</code>]: if the default of having all model parameters estimated should be changed.</li><li>[<code>ftypemom</code>]: if not having model-specific default moments to be estimated should be changed.</li><li>[<code>plotmoms</code>]: if the default of having an empty graph to compare moments in the model and data should be changed.</li></ul></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Thursday 8 January 2026 08:35">Thursday 8 January 2026</span>. Using Julia version 1.12.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
